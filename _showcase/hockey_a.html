<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Counter Bars</title>
	<style>
		body {
			background-image: url('../assets/images/hockey/whaler.png'); /* Replace with the URL of your semi-transparent image */
			background-repeat: no-repeat;
			background-position: top center;
			font-family: sans-serif;
			color: #333;
			opacity: 0.9;
			background-color: rgba(181, 212, 191, 0.5); /* Adjust the color and transparency as needed */
		}

		table {
			border-collapse: collapse;
			width: 90%;
			margin: 5px auto;
			background-color: rgba(255, 255, 255, 0.5); /* Table background color with transparency */
		}

		th, td {
			border: 1px solid #ccc;
			padding: 5px;
			text-align: left;
			background-color: rgba(255, 255, 255, 0.7); /* Table cell background color with transparency */
		}

		th {
			background-color: #f2f2f2;
		}

		.buttons {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 10px;
		}

		button {
			margin: 0px;
			padding: 3px 3px;
			font-size: 40px; /* Adjust the font size as needed */
			width: 25px; /* Adjust the width as needed */
			border: 1px solid black;
			text-align: center;
			border-radius: 2px;
		}

		.thin-column {
			width: 300px; /* Adjust the width as needed */
		}

		.thin-column button {
			width: 140px; /* Adjust the width as needed */
			font-size: 30px; /* Adjust the font size to match the new width */
		}

		.fixed-width {
			width: 280px; /* Adjust the width as needed */
			font-size: 20px; /* Adjust the font size as needed */
		}

		.bar-container {
			margin-top: 20px;
			padding-left: 20px;
		}

		.bar-wrapper {
			display: flex;
			align-items: center;
			margin-bottom: 10px;
		}

		.bar-label {
			min-width: 100px;
		}

		.bar {
			height: 40px;
			background-color: #bbd4bc;
			margin-right: 10px;
			transition: width 0.5s;
		}

		.counter-number {
			font-weight: bold;
		}

		h1 {
			text-align: center;
			font-size: 40px; /* Adjust the font size as needed */
		}

		h3 {
			text-align: center;
			font-size: 26px; /* Adjust the font size as needed */
			background-color: rgba(255, 255, 255, 0.7); /* Table cell background color with transparency */
		}

		p {
			text-align: center;
			font-size: 20px; /* Adjust the font size as needed */
			background-color: rgba(255, 255, 255, 0.7); /* Table cell background color with transparency */
		}


		#dateField {
			display: block;
			margin: 0 auto;
			text-align: center;
			font-size: 18px; /* Adjust the font size as needed */
			background-color: rgba(255, 255, 255, 0.7); /* Table cell background color with transparency */
			padding: 10px; /* Add padding to create some space around the input */
			border: 2px solid black;

		}

		.row-hidden {
			opacity: 0.4;
			background-color: #f2f2f2;
		}
	</style>
</head>
<body>

<h3>MITES A<br/>Whalers Rec League<br/>Shifts Counter</h3>
<p>Click on the player name to toggle their presence </p>

<input type="text" id="dateField" name="dateField" value="" readonly>

<table>
	<thead>
	<tr>
		<th>Player</th>
		<th></th>
		<th>Counter</th>
	</tr>
	</thead>
	<tbody id="playersTableBody">
	<!-- Dynamic rows will be inserted here -->
	</tbody>
</table>

<script>
	// Set the default value to today's date
	const dateField = document.getElementById("dateField");
	const today = new Date();
	const formattedDate = today.toISOString().slice(0, 10); // Get YYYY-MM-DD format
	dateField.value = formattedDate;

	// List of players
	const players = [
		"Tanner Bowen",
		"Easton Farnham",
		"Connor Hunter",
		"Calder Miller",
		"Camdem Nauman",
		"Lars Stuckey",
		"Walker Teague",
		"Max Ungaro",
		"Sam Wolverton"
	];


	// Generate table rows based on the players list
	const tableBody = document.getElementById("playersTableBody");
	players.forEach((player, index) => {
		const rowId = `row${index + 1}`;
		const barId = `bar${index + 1}`;
		const counterId = `counter${index + 1}`;
		const row = document.createElement("tr");
		row.id = rowId;

		row.innerHTML = `
			<td class="fixed-width">
				<button class="fixed-width" onclick="toggle_row(${index + 1})">${player}</button>
			</td>
			<td class="thin-column">
				<button onclick="incrementCounter(${index + 1})">+</button>
				<button onclick="decrementCounter(${index + 1})">-</button>
			</td>
			<td>
				<div class="bar-wrapper">
					<div class="bar" id="${barId}"></div>
					<div class="counter-number" id="${counterId}">0</div>
				</div>
			</td>
		`;

		tableBody.appendChild(row);
	});

	function incrementCounter(index) {
		const barElement = document.getElementById(`bar${index}`);
		const counterElement = document.getElementById(`counter${index}`);
		let counterValue = parseInt(counterElement.textContent) || 0;

		if (counterValue < 100) {
			counterValue++;
			counterElement.textContent = counterValue;
			barElement.style.width = `${counterValue * 5}%`;
		}
	}

	function decrementCounter(index) {
		const barElement = document.getElementById(`bar${index}`);
		const counterElement = document.getElementById(`counter${index}`);
		let counterValue = parseInt(counterElement.textContent) || 0;

		if (counterValue > 0) {
			counterValue--;
			counterElement.textContent = counterValue;
			barElement.style.width = `${counterValue * 5}%`;
		}
	}

	function toggle_row(index) {
		const row = document.getElementById(`row${index}`);
		row.classList.toggle("row-hidden");
		reorganizeTable();
	}

	function reorganizeTable() {
		const table = document.querySelector("table");
		const tbody = table.querySelector("tbody");
		const rows = tbody.querySelectorAll("tr");

		// Separate hidden and visible rows
		const visibleRows = [];
		const hiddenRows = [];

		rows.forEach((row) => {
			if (row.classList.contains("row-hidden")) {
				hiddenRows.push(row);
			} else {
				visibleRows.push(row);
			}
		});

		// Remove all rows from the table
		rows.forEach((row) => {
			row.remove();
		});

		// Append visible rows first
		visibleRows.forEach((row) => {
			tbody.appendChild(row);
		});

		// Append hidden rows at the end
		hiddenRows.forEach((row) => {
			tbody.appendChild(row);
		});
	}
</script>
</body>
</html>
